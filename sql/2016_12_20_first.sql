CREATE SEQUENCE akt_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE loige_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE metaandmed_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE muutmismarge_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE osa_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE paragrahv_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE akt (id INT NOT NULL, aktinimi TEXT NOT NULL, PRIMARY KEY(id));
CREATE TABLE loige (id INT NOT NULL, paragrahv_id INT DEFAULT NULL, tunnus VARCHAR(255) NOT NULL, loige_nr VARCHAR(255) NOT NULL, kuvatav_nr VARCHAR(255) NOT NULL, sisu_tekst TEXT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_A9C7121C6B06A590 ON loige (paragrahv_id);
CREATE TABLE metaandmed (id INT NOT NULL, akt_id INT DEFAULT NULL, valjaandja VARCHAR(255) NOT NULL, dokument_liik VARCHAR(255) NOT NULL, tekstiliik VARCHAR(255) NOT NULL, lyhend VARCHAR(255) NOT NULL, dokument_etapp VARCHAR(255) NOT NULL, dokument_staatus VARCHAR(255) NOT NULL, aktikuupaev DATE NOT NULL, rt_osa VARCHAR(255) NOT NULL, rt_aasta VARCHAR(255) NOT NULL, rt_nr VARCHAR(255) NOT NULL, rt_artikkel VARCHAR(255) NOT NULL, akt_viide VARCHAR(255) NOT NULL, joustumine DATE NOT NULL, kehtivuse_algus DATE NOT NULL, kehtivuse_lopp DATE NOT NULL, skeemi_nimi VARCHAR(255) NOT NULL, globaal_id VARCHAR(255) NOT NULL, metaandmed_versioon VARCHAR(255) NOT NULL, metaandmed_versioon_kuupaev DATE NOT NULL, metaandmed_versioon_pohjustaja VARCHAR(255) NOT NULL, terviktekst_grupi_id VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_9708EC31E1D510E9 ON metaandmed (akt_id);
CREATE TABLE muutmismarge (id INT NOT NULL, akt_id INT DEFAULT NULL, aktikuupaev DATE NOT NULL, rt_osa VARCHAR(255) NOT NULL, rt_aasta VARCHAR(255) NOT NULL, rt_nr VARCHAR(255) NOT NULL, rt_artikkel VARCHAR(255) NOT NULL, akt_viide VARCHAR(255) NOT NULL, joustumine DATE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_852DBD1DE1D510E9 ON muutmismarge (akt_id);
CREATE TABLE osa (id INT NOT NULL, akt_id INT DEFAULT NULL, tunnus VARCHAR(255) NOT NULL, osa_nr VARCHAR(255) NOT NULL, kuvatav_nr VARCHAR(255) NOT NULL, osa_pealkiri TEXT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_826D2EF4E1D510E9 ON osa (akt_id);
CREATE TABLE paragrahv (id INT NOT NULL, osa_id INT DEFAULT NULL, tunnus VARCHAR(255) NOT NULL, paragrahv_nr VARCHAR(255) NOT NULL, kuvatav_nr VARCHAR(255) NOT NULL, paragrahv_pealkiri TEXT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_5C73D58EC880A77 ON paragrahv (osa_id);
ALTER TABLE loige ADD CONSTRAINT FK_A9C7121C6B06A590 FOREIGN KEY (paragrahv_id) REFERENCES paragrahv (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE metaandmed ADD CONSTRAINT FK_9708EC31E1D510E9 FOREIGN KEY (akt_id) REFERENCES akt (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE muutmismarge ADD CONSTRAINT FK_852DBD1DE1D510E9 FOREIGN KEY (akt_id) REFERENCES akt (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE osa ADD CONSTRAINT FK_826D2EF4E1D510E9 FOREIGN KEY (akt_id) REFERENCES akt (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE paragrahv ADD CONSTRAINT FK_5C73D58EC880A77 FOREIGN KEY (osa_id) REFERENCES osa (id) NOT DEFERRABLE INITIALLY IMMEDIATE;

GRANT ALL ON TABLE akt TO postgres;
GRANT ALL ON TABLE loige TO postgres;
GRANT ALL ON TABLE metaandmed TO postgres;
GRANT ALL ON TABLE muutmismarge TO postgres;
GRANT ALL ON TABLE osa TO postgres;
GRANT ALL ON TABLE paragrahv TO postgres;